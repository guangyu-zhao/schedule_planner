<!-- Event Modal -->
<div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="eventModal">
        <div class="modal-header">
            <h3 id="modalTitle">New Event</h3>
            <button class="modal-close" id="modalClose">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="eventTitle"><span data-i18n="modal.title">Title</span> <span class="required">*</span></label>
                <input type="text" id="eventTitle" data-i18n-placeholder="modal.title.placeholder" placeholder="What to do?" maxlength="100">
            </div>
            <div class="form-row">
                <div class="form-group"><label for="eventDate" data-i18n="modal.date">Date</label><input type="date" id="eventDate"></div>
                <div class="form-group"><label for="eventStart" data-i18n="modal.start">Start</label><select id="eventStart"></select></div>
                <div class="form-group"><label for="eventEnd" data-i18n="modal.end">End</label><select id="eventEnd"></select></div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="eventCategory" data-i18n="modal.category">Category</label>
                    <select id="eventCategory">
                        <option value="å·¥ä½œ" selected>ğŸ’¼ Work</option>
                        <option value="å­¦ä¹ ">ğŸ“š Study</option>
                        <option value="ä¸ªäºº">ğŸ‘¤ Personal</option>
                        <option value="è¿åŠ¨">ğŸƒ Exercise</option>
                        <option value="å…¶ä»–">ğŸ“Œ Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="eventPriority" data-i18n="modal.priority">Priority</label>
                    <select id="eventPriority">
                        <option value="1" selected>ğŸ”´ High</option>
                        <option value="2">ğŸŸ¡ Medium</option>
                        <option value="3">ğŸŸ¢ Low</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="eventRecur" data-i18n="modal.repeat">Repeat</label>
                <select id="eventRecur">
                    <option value="">No Repeat</option>
                    <option value="daily">Daily</option>
                    <option value="weekdays">Weekdays</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                </select>
            </div>
            <div class="form-group"><label data-i18n="modal.color">Color</label><div class="color-picker" id="colorPicker"></div></div>
            <div class="form-group"><label for="eventDescription" data-i18n="modal.description">Description</label><textarea id="eventDescription" data-i18n-placeholder="modal.description.placeholder" placeholder="Add notes..." rows="3"></textarea></div>
        </div>
        <div class="modal-footer">
            <div class="modal-footer-left">
                <button class="btn btn-danger" id="deleteBtn" style="display:none" data-i18n="modal.delete">Delete</button>
            </div>
            <div class="modal-footer-right">
                <button class="btn btn-secondary" id="cancelBtn" data-i18n="modal.cancel">Cancel</button>
                <button class="btn btn-success" id="completeBtn" style="display:none">âœ“ Complete</button>
                <button class="btn btn-primary" id="saveBtn" data-i18n="modal.save">Save</button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Account Confirm Modal -->
<div class="modal-overlay" id="deleteAccountModal">
    <div class="modal" style="width: 400px;">
        <div class="modal-header">
            <h3 data-i18n="deleteAccount.title" style="color: var(--danger);">Delete Account</h3>
            <button class="modal-close" onclick="document.getElementById('deleteAccountModal').classList.remove('active')">&times;</button>
        </div>
        <div class="modal-body">
            <p data-i18n="deleteAccount.warning" style="font-size:13px;color:var(--text-secondary);margin-bottom:16px;line-height:1.6;">
                This action is <strong style="color:var(--danger)">irreversible</strong>. All schedules, timer records, notes and other data will be permanently deleted.
            </p>
            <div class="form-group">
                <label for="deleteAccountPwd" data-i18n="deleteAccount.confirmLabel">Enter password to confirm</label>
                <input type="password" id="deleteAccountPwd" data-i18n-placeholder="deleteAccount.placeholder" placeholder="Enter your password" autocomplete="current-password">
            </div>
            <div class="auth-error" id="deleteAccountError" style="min-height:0;margin:0 0 8px;"></div>
        </div>
        <div class="modal-footer">
            <div></div>
            <div class="modal-footer-right">
                <button class="btn btn-secondary" onclick="document.getElementById('deleteAccountModal').classList.remove('active')" data-i18n="deleteAccount.cancel">Cancel</button>
                <button class="btn btn-danger" id="confirmDeleteAccountBtn" onclick="confirmDeleteAccount()" data-i18n="deleteAccount.confirm">Confirm Delete</button>
            </div>
        </div>
    </div>
</div>

<!-- Keyboard Shortcuts Help -->
<div class="modal-overlay" id="shortcutsModal">
    <div class="modal" style="width: 480px;">
        <div class="modal-header">
            <h3 data-i18n="shortcuts.title">Keyboard Shortcuts</h3>
            <button class="modal-close" onclick="document.getElementById('shortcutsModal').classList.remove('active')">&times;</button>
        </div>
        <div class="modal-body" style="padding:12px 20px;">
            <div class="shortcut-section">
                <h4 class="shortcut-section-title" data-i18n="shortcuts.schedule">Schedule</h4>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.undo">Undo</span><kbd>Ctrl</kbd> + <kbd>Z</kbd></div>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.editEvent">Edit selected event</span><kbd>Enter</kbd></div>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.deleteEvent">Delete selected event</span><kbd>Delete</kbd> / <kbd>Backspace</kbd></div>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.toggleComplete">Toggle complete status</span><kbd>Space</kbd></div>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.newEvent">Quick new event</span><kbd>N</kbd></div>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.closePopup">Close popup</span><kbd>Esc</kbd></div>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.saveEvent">Save event</span><kbd>Enter</kbd> (in edit box)</div>
            </div>
            <div class="shortcut-section">
                <h4 class="shortcut-section-title" data-i18n="shortcuts.notes">Notes Editor</h4>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.indent">Indent</span><kbd>Tab</kbd></div>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.outdent">Outdent</span><kbd>Shift</kbd> + <kbd>Tab</kbd></div>
            </div>
            <div class="shortcut-section">
                <h4 class="shortcut-section-title" data-i18n="shortcuts.global">Global</h4>
                <div class="shortcut-row"><span class="shortcut-desc" data-i18n="shortcuts.openShortcuts">Open shortcuts help</span><kbd>?</kbd></div>
            </div>
        </div>
    </div>
</div>

<!-- Action Popover -->
<div class="popover" id="actionPopover">
    <button class="popover-btn" id="popoverEdit"><span class="popover-icon">âœï¸</span> <span data-i18n="popover.edit">Edit</span></button>
    <button class="popover-btn" id="popoverComplete"><span class="popover-icon">âœ“</span> <span data-i18n="popover.complete">Complete</span></button>
    <button class="popover-btn popover-btn-danger" id="popoverDelete"><span class="popover-icon">ğŸ—‘ï¸</span> <span data-i18n="popover.delete">Delete</span></button>
</div>

<!-- Toast -->
<div class="toast" id="toast">
    <span class="toast-message" id="toastMessage"></span>
    <button class="toast-action" id="toastAction" style="display:none" data-i18n="toast.undo">Undo</button>
</div>
